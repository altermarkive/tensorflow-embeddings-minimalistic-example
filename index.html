<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.8.0/css/reveal.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.8.0/css/theme/white.min.css">
</head>
<body>
<div class="reveal">
<div class="slides">
<section>
<div><img src="slides/slide.01.png" width="90%"/></div>
<small style="text-align: justify;">As you may know embedding is a mapping of data set from a high-dimensional to a low-dimensional vector space. It is meant to preserve similarity between the vectors as a spatial distance.</small>
</section>
<section>
<div><img src="slides/slide.01.png" width="90%"/></div>
<small style="text-align: justify;">Many examples demonstrating the visualization of embeddings with TensorBoard use pre-generated files & data.</small>
</section>
<section>
<div><img src="slides/slide.01.png" width="90%"/></div>
<small style="text-align: justify;">However, I was interested in an example with a more minimalistic data set but guiding me how to create everything necessary for a visualization. In the end I created such an example myself and decided to share it here.</small>
</section>
<section>
<div><img src="slides/slide.02.png" width="90%"/></div>
<small style="text-align: justify;">Let's start with the dependencies. The example will require NumPy...</small>
</section>
<section>
<div><img src="slides/slide.03.png" width="90%"/></div>
<small style="text-align: justify;">...it will also require TensorFlow...</small>
</section>
<section>
<div><img src="slides/slide.04.png" width="90%"/></div>
<small style="text-align: justify;">...and Pillow module to create sprites - the images associated with the vector labels in the embedding.</small>
</section>
<section>
<div><img src="slides/slide.05.png" width="90%"/></div>
<small style="text-align: justify;">As mentioned earlier, the example will use minimalistic data set - it will consist of eight vectors. The vectors are three-dimensional...</small>
</section>
<section>
<div><img src="slides/slide.06.png" width="90%"/></div>
<small style="text-align: justify;">...and you can probably notice that the vectors correspond to vertices of a cube. This will be the embedding. Half of the vertices will be labeled with 0 and another half with 1.</small>
</section>
<section>
<div><img src="slides/slide.07.png" width="90%"/></div>
<small style="text-align: justify;">Let's use NumPy to convert the data to arrays.</small>
</section>
<section>
<div><img src="slides/slide.08.png" width="90%"/></div>
<small style="text-align: justify;">Let's also create a TensorFlow vector to hold the data set vector values.</small>
</section>
<section>
<div><img src="slides/slide.09.png" width="90%"/></div>
<small style="text-align: justify;">ProjectorConfig will be used to associate meta-data and sprites with the embedding.</small>
</section>
<section>
<div><img src="slides/slide.10.png" width="90%"/></div>
<small style="text-align: justify;">Let's add an embedding definition. The name of the variable we created earlier will be used as the tensor name.</small>
</section>
<section>
<div><img src="slides/slide.11.png" width="90%"/></div>
<small style="text-align: justify;">The embedding will have associated meta-data (the contents will be explained later).</small>
</section>
<section>
<div><img src="slides/slide.12.png" width="90%"/></div>
<small style="text-align: justify;">The embedding will also have associated sprites - each sprite 100x100 pixels large (and the contents will also be explained later).</small>
</section>
<section>
<div><img src="slides/slide.13.png" width="90%"/></div>
<small style="text-align: justify;">Last but not least, a summary writer is created. It is responsible for creating an event file and writing summaries to it.</small>
</section>
<section>
<div><img src="slides/slide.14.png" width="90%"/></div>
<small style="text-align: justify;">Now that all the prerequisites are ready let's run a TensorFlow session (and let's not forget to initialize the variables).</small>
</section>
<section>
<div><img src="slides/slide.15.png" width="90%"/></div>
<small style="text-align: justify;">With the variable initialized we can store it in a checkpoint. This can be done using a Saver.</small>
</section>
<section>
<div><img src="slides/slide.16.png" width="90%"/></div>
<small style="text-align: justify;">But what about the meta-data?</small>
</section>
<section>
<div><img src="slides/slide.17.png" width="90%"/></div>
<small style="text-align: justify;">Simplifying, the meta-data file contains the information about the labels associated with the set of vectors, which belong to the embedding.</small>
</section>
<section>
<div><img src="slides/slide.18.png" width="90%"/></div>
<small style="text-align: justify;">You can find more information about the format if you follow this link.</small>
</section>
<section>
<div><img src="slides/slide.19.png" width="90%"/></div>
<small style="text-align: justify;">And what about the sprites? Let's create sprites for each of the two labels - 0 will be a minus sign, 1 will be a plus sign. Let's start with two 5x5 arrays with 0 representing a black pixel and 1 representing a white pixel.</small>
</section>
<section>
<div><img src="slides/slide.20.png" width="90%"/></div>
<small style="text-align: justify;">Using the Pillow module these can be converted to actual 5x5 images...</small>
</section>
<section>
<div><img src="slides/slide.21.png" width="90%"/></div>
<small style="text-align: justify;">...which can be upscaled to 100x100 resolution.</small>
</section>
<section>
<div><img src="slides/slide.22.png" width="90%"/></div>
<small style="text-align: justify;">Sprite image used by TensorFlow has a square shape, collecting sprites associated with each vector label. To fit eight sprites, we will need an 3x3 sprite image.</small>
</section>
<section>
<div><img src="slides/slide.23.png" width="90%"/></div>
<small style="text-align: justify;">Hence the actual resolution will be 300x300 pixels.</small>
</section>
<section>
<div><img src="slides/slide.24.png" width="90%"/></div>
<small style="text-align: justify;">Let's put the sprite for the first vector label...</small>
</section>
<section>
<div><img src="slides/slide.25.png" width="90%"/></div>
<small style="text-align: justify;">...then the second...</small>
</section>
<section>
<div><img src="slides/slide.26.png" width="90%"/></div>
<small style="text-align: justify;">...third...</small>
</section>
<section>
<div><img src="slides/slide.27.png" width="90%"/></div>
<small style="text-align: justify;">...and so on until the 8th vector label.</small>
</section>
<section>
<div><img src="slides/slide.28.png" width="90%"/></div>
<small style="text-align: justify;">Once the image is ready, it can be saved to a file.</small>
</section>
<section>
<div><img src="slides/slide.29.png" width="90%"/></div>
<small style="text-align: justify;">You can find more information about the format if you follow this link.</small>
</section>
<section>
<div><img src="slides/slide.30.png" width="90%"/></div>
<small style="text-align: justify;">It is not necessary, but to keep things clean the example can be wrapped into a Ubuntu-based Docker container...</small>
</section>
<section>
<div><img src="slides/slide.31.png" width="90%"/></div>
<small style="text-align: justify;">...which will encapsulate Python 3...</small>
</section>
<section>
<div><img src="slides/slide.32.png" width="90%"/></div>
<small style="text-align: justify;">...all the dependencies mentioned earlier...</small>
</section>
<section>
<div><img src="slides/slide.33.png" width="90%"/></div>
<small style="text-align: justify;">...and will run the Python code.</small>
</section>
<section>
<div><img src="slides/slide.34.png" width="90%"/></div>
<small style="text-align: justify;">We can also have a script which will clean up the TensorFlow logs from previous runs...</small>
</section>
<section>
<div><img src="slides/slide.35.png" width="90%"/></div>
<small style="text-align: justify;">...then it will build the Docker container...</small>
</section>
<section>
<div><img src="slides/slide.36.png" width="90%"/></div>
<small style="text-align: justify;">...run it...</small>
</section>
<section>
<div><img src="slides/slide.37.png" width="90%"/></div>
<small style="text-align: justify;">...and launch TensorBoard for the logs from that run.</small>
</section>
<section>
<div><img src="slides/slide.38.png" width="90%"/></div>
<small style="text-align: justify;">Remember to be very cautious about the directory paths - they must match the ones used in the Python code.</small>
</section>
<section>
<div><img src="slides/slide.39.png" width="90%"/></div>
<small style="text-align: justify;">Once you point your browser to localhost on port 6006, you should see TensorBoard visualizing the embedding.</small>
</section>
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.8.0/js/reveal.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.8.0/plugin/markdown/marked.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.8.0/plugin/markdown/markdown.min.js"></script>
<script>
Reveal.initialize({
  center: false,
  controls: true,
  transition: "none",
  progress: true
});
</script>
</body>
</html>
